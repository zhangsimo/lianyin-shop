webpackJsonp([17],{"1w+M":function(t,n){},"23Vp":function(t,n,e){"use strict";var a=e("mvHQ"),i=e.n(a);n.a={baseURL:"http://ant-image.9vdata.com/",hoistoryCity:function(t){var n=localStorage.getItem("status_list")||"[]",e=JSON.parse(n),a=e.indexOf(t);a>-1&&e.splice(a,1),e.length>=3&&e.pop(),e.unshift(t),localStorage.setItem("status_list",i()(e))}}},"961Q":function(t,n){},KfKU:function(t,n){},NHnr:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("7+uW"),i={render:function(){var t=this.$createElement,n=this._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},staticRenderFns:[]};var s=e("VU/8")({name:"App"},i,!1,function(t){e("o8nZ")},null,null).exports,o=e("/ocq"),r=e("Xxa5"),c=e.n(r),l=e("exGp"),u=e.n(l),d=e("mvHQ"),p=e.n(d),h={render:function(){var t=this.$createElement,n=this._self._c||t;return n("div",{staticClass:"header"},[n("div",{staticClass:"left",on:{click:this.changeCity}},[this._v("\n    "+this._s(this.$store.state.city.name)+"\n    "),n("i",[this._v("∨")])]),this._v(" "),n("div",{staticClass:"right"},[n("input",{staticClass:"ipt",attrs:{type:"text",placeholder:"输入线路搜索"},on:{click:this.tosearch}})])])},staticRenderFns:[]};var f=e("VU/8")({data:function(){return{city:"常州"}},methods:{changeCity:function(){this.$router.push({path:"/status"})},tosearch:function(){this.$router.push("/search")}}},h,!1,function(t){e("cTlC")},"data-v-c41b6dac",null).exports,m=e("23Vp"),v={props:["value"],data:function(){return{Url:m.a.baseURL}},methods:{gofood:function(t){this.$router.push({path:"/classfiy",query:{id:t.category_id}})}}},g={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"classify"},t._l(t.value,function(n,a){return e("div",{key:a,staticClass:"food",on:{click:function(e){return t.gofood(n)}}},[e("div",{staticClass:"img"},[e("img",{attrs:{src:t.Url+n.image_url,alt:""}}),t._v(" "),e("p",[t._v(t._s(n.category.name))])])])}),0)},staticRenderFns:[]};var _={props:["banner"],data:function(){return{listImgs:this.banner,baseURL:m.a.baseURL}}},y={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"box"},[e("mt-swipe",{attrs:{"show-indicators":!1}},t._l(t.banner,function(n,a){return e("mt-swipe-item",{key:a},[e("a",{attrs:{href:n.link_url}},[e("img",{staticClass:"img",attrs:{src:t.baseURL+n.image_url}})])])}),1)],1)},staticRenderFns:[]};var L={props:["shop"],data:function(){return{baseURL:m.a.baseURL,contentH:""}},methods:{goMerchant:function(t){this.$router.push({path:"/merchant",query:{id:t}})}}},b={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"merchant"},[e("h3",[t._v("附近商家")]),t._v(" "),e("ul",t._l(t.shop,function(n,a){return e("li",{key:a,on:{click:function(e){return t.goMerchant(n.id)}}},[e("div",{staticClass:"merchantlist"},[e("div",{staticClass:"title"},[e("h2",[t._v(t._s(n.merchant_name))]),t._v(" "),e("p",[t._v(t._s(n.distance)+"km")])]),t._v(" "),e("div",[e("p",{staticClass:"explain"},[t._v("简介: "+t._s(n.profile))])]),t._v(" "),e("div",{staticClass:"img"},t._l(n.header_image_url.split(","),function(n,a){return e("span",{key:a},[e("img",{attrs:{src:t.baseURL+n,alt:""}})])}),0),t._v(" "),null!==n.goods?e("div",{staticClass:"discounts"},[e("p",[t._v("商家优惠")]),t._v(" "),e("div",[e("div",{staticClass:"left"},[e("img",{attrs:{src:t.baseURL+n.goods.title_image.split(",")[0],alt:""}})]),t._v(" "),e("div",{staticClass:"right"},[e("h5",{staticClass:"top"},[t._v(t._s(n.goods.description))]),t._v(" "),e("h5",{staticClass:"bottom"},[e("div",{staticClass:"discourt"},[e("span",{staticStyle:{color:"red"}},[t._v("￥"+t._s(n.goods.money))]),t._v(" +\n                  "),e("span",{staticStyle:{color:"red"}},[t._v(t._s(n.goods.packet)+"红包值")])]),t._v(" "),e("div",{staticClass:"sales"},[e("span",[t._v("\n                    门市价:\n                    "),e("i",[t._v("￥"+t._s(n.goods.all_money))])])])])])])]):t._e()])])}),0)])},staticRenderFns:[]};var C={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"footer"},[e("ul",{on:{click:t.addColor}},[e("li",[e("router-link",{staticClass:"color",attrs:{to:"/"}},[e("i",{staticClass:"iconfont"},[t._v("")]),t._v(" "),e("p",[t._v("首页")])])],1),t._v(" "),e("li",[e("router-link",{attrs:{to:"/order"}},[e("i",{staticClass:"iconfont"},[t._v("")]),t._v(" "),e("p",[t._v("订单")])])],1),t._v(" "),e("li",[e("router-link",{attrs:{to:"/user"}},[e("i",{staticClass:"iconfont"},[t._v("")]),t._v(" "),e("p",[t._v("我的")])])],1)])])},staticRenderFns:[]};var x={components:{mayiHeader:f,mayiBody:e("VU/8")(v,g,!1,function(t){e("inxl")},"data-v-b48d6458",null).exports,mayiSwipe:e("VU/8")(_,y,!1,function(t){e("KfKU")},"data-v-433a8200",null).exports,mayiMerchant:e("VU/8")(L,b,!1,function(t){e("961Q")},"data-v-5e5ef80c",null).exports,mayiFooter:e("VU/8")({methods:{addColor:function(t){if("p"===t.target.localName||"i"===t.target.localName)for(var n=t.target.parentNode.parentNode.parentNode.children,e=0;e<n.length;e++)n[e].firstElementChild.className=""}}},C,!1,function(t){e("bp+f")},"data-v-587236ed",null).exports},data:function(){return{let:119.946973,lng:31.772752,BannerList:"",shopList:"",contentH:"",page:2,categoryList:"",isMoreLoading:!1}},created:function(){""===this.$store.state.city?this.maker():(this.let=this.$store.state.city.let,this.lng=this.$store.state.city.lng,this.gitcity())},methods:{maker:function(){var t=new AMap.Map("iCenter"),n=void 0,e=this;t.plugin("AMap.Geolocation",function(){n=new AMap.Geolocation({enableHighAccuracy:!0,timeout:1e4,maximumAge:1e5,convert:!0,showButton:!0,buttonPosition:"LB",buttonOffset:new AMap.Pixel(10,20),showMarker:!0,showCircle:!0,panToLocation:!0,zoomToAccuracy:!0}),t.addControl(n),n.getCurrentPosition(),AMap.event.addListener(n,"complete",function(t){var n=t.position.getLng(),a=t.position.getLat();e.city=t.addressComponent.city,e.$store.commit("getCity",{x:n,y:a,name:t.addressComponent.city}),e.$store.commit("useraddress",{lat:n,lng:a}),e.let=n,e.lng=a,e.$axios.post("/myapi/index",{lat:n,lng:a,token:1}).then(function(t){e.categoryList=t.data.data.categoryList,e.BannerList=t.data.data.bannerList,e.shopList=t.data.data.shopList})}),AMap.event.addListener(n,"error",function(t){"FAILED"==t.info&&(this.$axios.post("/myapi/index",{lat:119.946973,lng:31.772752,token:1}).then(function(t){e.categoryList=t.data.data.categoryList,e.BannerList=t.data.data.bannerList,e.shopList=t.data.data.shopList}),this.$store.commit("getCity",{x:119.946973,y:31.772752,name:"常州"}))})})},loadMore:function(){var t=this;this.shopList.length%10==0&&(this.loading=!0,this.$axios.post("/myapi/index",{lat:this.let,lng:this.lng,page:this.page,token:1}).then(function(n){var e=JSON.parse(p()(t.shopList));t.shopList=e.concat(n.data.data.shopList)}),this.loading=!1,this.page++)},gitcity:function(){var t=this;return u()(c.a.mark(function n(){var e;return c.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$axios.post("/myapi/index",{lat:t.let,lng:t.lng,token:1});case 2:e=n.sent,t.categoryList=e.data.data.categoryList,t.BannerList=e.data.data.bannerList,t.shopList=e.data.data.shopList;case 6:case"end":return n.stop()}},n,t)}))()}}},k={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"home"},[e("mayi-header"),t._v(" "),e("div",{staticClass:"prdListWrap"},[e("mt-loadmore",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMore,expression:"loadMore"}],attrs:{"infinite-scroll-disabled":"loading","infinite-scroll-distance":"0","infinite-scroll-immediate-check":"fasle"}},[e("mayi-body",{model:{value:t.categoryList,callback:function(n){t.categoryList=n},expression:"categoryList"}}),t._v(" "),e("mayi-swipe",{attrs:{banner:t.BannerList}}),t._v(" "),e("mayi-merchant",{attrs:{shop:t.shopList}})],1)],1),t._v(" "),e("mayi-footer")],1)},staticRenderFns:[]};var w=e("VU/8")(x,k,!1,function(t){e("OkK2"),e("iesN")},"data-v-7a099cfa",null).exports;a.default.use(o.a);var $=new o.a({routes:[{path:"/",redirect:"/home"},{path:"/home",component:w},{path:"/search",component:function(){return e.e(9).then(e.bind(null,"X0jh"))}},{path:"/classfiy",component:function(){return Promise.all([e.e(0),e.e(6)]).then(e.bind(null,"RX4W"))}},{path:"/merchant",component:function(){return e.e(5).then(e.bind(null,"obm9"))}},{path:"/collect",component:function(){return e.e(4).then(e.bind(null,"uNO+"))}},{path:"/submit",component:function(){return e.e(7).then(e.bind(null,"xOPP"))}},{path:"/particulars",component:function(){return e.e(1).then(e.bind(null,"BEzi"))}},{path:"/addressSearch",component:function(){return e.e(10).then(e.bind(null,"qYog"))}},{path:"/status",component:function(){return e.e(2).then(e.bind(null,"gS2V"))}},{path:"/order",component:function(){return Promise.all([e.e(0),e.e(3)]).then(e.bind(null,"BjFu"))},redirect:"/allorderlist",children:[{path:"/allorderlist",component:function(){return Promise.all([e.e(0),e.e(14)]).then(e.bind(null,"+ERy"))}},{path:"/stayuse",component:function(){return Promise.all([e.e(0),e.e(15)]).then(e.bind(null,"8xDp"))}},{path:"/staybuy",component:function(){return Promise.all([e.e(0),e.e(13)]).then(e.bind(null,"dY6j"))}},{path:"/done",component:function(){return Promise.all([e.e(0),e.e(12)]).then(e.bind(null,"M8zP"))}}]},{path:"/erweima",component:function(){return e.e(1).then(e.bind(null,"BEzi"))}},{path:"/user",component:function(){return Promise.all([e.e(0),e.e(8)]).then(e.bind(null,"nJuU"))}},{path:"/searchresult",component:function(){return e.e(11).then(e.bind(null,"Boed"))}}]}),U=e("AuxL"),M=e.n(U),R=(e("SJZ9"),e("1w+M"),e("cjdf"),e("d8/S"),e("Au9i")),A=e.n(R),N=e("NYxO"),S=e("424j");a.default.use(N.a);var P=new N.a.Store({strict:!0,state:{cityList:"",one:"",city:"",changeCity:"",useraddress:""},mutations:{addOneList:function(t,n){t.one=n},getCity:function(t,n){t.city=n},getAllCity:function(t,n){t.cityList=n},changeCity:function(t,n){t.city=n},useraddress:function(t,n){t.useraddress=n}},plugins:[Object(S.a)({storage:window.sessionStorage})]}),B=e("mtWM"),E=e.n(B);a.default.prototype.$axios=E.a,a.default.use(A.a),M()(),a.default.config.productionTip=!1,new a.default({el:"#app",router:$,store:P,components:{App:s},template:"<App/>"})},OkK2:function(t,n){},SJZ9:function(t,n){},"bp+f":function(t,n){},cTlC:function(t,n){},cjdf:function(t,n){},"d8/S":function(t,n){},iesN:function(t,n){},inxl:function(t,n){},o8nZ:function(t,n){}},["NHnr"]);
//# sourceMappingURL=app.0edc6612e8f7b8993f29.js.map